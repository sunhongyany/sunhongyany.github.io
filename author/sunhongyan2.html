<!DOCTYPE html>
<html lang="zh">
<head>
        <meta charset="utf-8" />
        <title>Stay hungry, stay foolish - sunhongyan</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">Stay hungry, stay foolish </a></h1>
                <nav><ul>
                    <li><a href="/archives.html">文章归档</a></li>
                    <li><a href="/category.html">文章分类</a></li>
                </ul></nav>
        </header><!-- /#banner -->

                <section id="content" class="body">
                    <ol id="posts-list" class="hfeed" start="2">
            <li><article class="hentry">
                <header>
                    <h1><a href="/shi-li-shu-xing-he-yuan-xing-shu-xing.html" rel="bookmark"
                           title="Permalink to 实例属性和原型属性">实例属性和原型属性</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2017-09-09T19:30:00+08:00">
                Published: 六 09 九月 2017
        </abbr>


</footer><!-- /.post-info -->                <p>利用函数作用域来实现类的效果。</p>
<ol>
<li>可以在函数中使用关键字var声明私有变量，它们可以由私有函数和特权方法访问。</li>
<li>可以在对象的构造函数中声明私有函数，并由特权方法调用。</li>
<li>特权方法可以使用this.method = function(){}.</li>
<li>公共方法可以使用Class.prototype.method = function(){}来声明。</li>
<li>公共属性可以使用this.prototype来声明，能够对外部访问。</li>
</ol>
<div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">Player</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">sport</span><span class="p">,</span> <span class="nx">age</span><span class="p">,</span> <span class="nx">country</span><span class="p">){</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">constructor</span><span class="p">.</span><span class="nx">noOfPlayers</span><span class="o">++</span><span class="p">;</span>
    <span class="c1">// 私有属性和函数，只能由特权对象浏览，编辑或调用。</span>
    <span class="kd">var</span> <span class="nx">retirementAge</span> <span class="o">=</span> <span class="mi">40</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">available</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">playerAge</span> <span class="o">=</span> <span class="nx">age</span><span class="o">?</span> <span class="nx">age</span><span class="o">:</span> <span class="mi">18</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">PlayerSport</span> <span class="o">=</span> <span class="nx">sport</span><span class="o">?</span> <span class="nx">sport</span><span class="o">:</span> <span class="s2">&quot;Un&quot;</span><span class="p">;</span>
    <span class="kd">function</span> <span class="nx">isAvailable</span><span class="p">(){</span>
        <span class="k">return</span> <span class="nx">available</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">playerAge</span> <span class="o">&lt;</span> <span class="nx">retirementAge …</span></pre></div>
                <a class="readmore" href="/shi-li-shu-xing-he-yuan-xing-shu-xing.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/websocket.html" rel="bookmark"
                           title="Permalink to WebSocket">WebSocket</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2017-09-07T21:30:00+08:00">
                Published: 四 07 九月 2017
        </abbr>


</footer><!-- /.post-info -->                <p>WebSocket是HTML5规范中新提出的客户端-服务器通讯协议，协议本身使用新的ws://URL格式。</p>
<p>WebSocket 是独立的、创建在 TCP 上的协议，和 HTTP 的唯一关联是使用 HTTP 协议的101状态码进行协议切换，使用的 TCP 端口是80，可以用于绕过大多数防火墙的限制。</p>
<p>WebSocket 使得客户端和服务器之间的数据交换变得更加简单，允许服务端直接向客户端推送数据而不需要客户端进行请求，两者之间可以创建持久性的连接，并允许数据进行双向传送。</p>
<p>目前常见的浏览器如 Chrome、IE、Firefox、Safari、Opera 等都支持 WebSocket，同时需要服务端程序支持 WebSocket。</p>
<ol>
<li>Tornado的WebSocket模块</li>
</ol>
<p>Tornado提供支持WebSocket的模块是tornado.websocket，其中提供了一个WebSocketHandler类用来处理通讯。</p>
<p>WebSocketHandler.open()</p>
<p>当一个WebSocket连接建立后被调用。</p>
<p>WebSocketHandler.on_message(message)</p>
<p>当客户端发送消息message过来时被调用，注意此方法必须被重写。</p>
<p>WebSocketHandler.on_close()</p>
<p>当WebSocket连接关闭后被调用。</p>
<p>WebSocketHandler.write_message(message …</p>
                <a class="readmore" href="/websocket.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/jszhong-ge-chong-diao-yong-fang-shi.html" rel="bookmark"
                           title="Permalink to js中各种调用方式">js中各种调用方式</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2017-09-07T20:30:00+08:00">
                Published: 四 07 九月 2017
        </abbr>


</footer><!-- /.post-info -->                <ol>
<li>作为函数调用</li>
</ol>
<p>如果函数不是以方法，构造函数或通过apply(),call()调用，那么它只能作为一个函数被调用：</p>
<div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">add</span><span class="p">()</span> <span class="p">{}</span>
<span class="nx">add</span><span class="p">();</span>
<span class="kd">var</span> <span class="nx">sub</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
<span class="p">};</span>
<span class="nx">sub</span><span class="p">();</span>
</pre></div>


<p>当以这种模式调用时，this被绑定在全局对象上。</p>
<ol>
<li>作为方法被调用</li>
</ol>
<p>方法是作为对象属性的函数。对于方法来说，this被绑定在方法被调用时所在的对象上。</p>
<div class="highlight"><pre><span></span><span class="o">&lt;!</span><span class="nx">DOCTYPE</span> <span class="nx">html</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="nx">html</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="nx">head</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="nx">meta</span> <span class="nx">charset</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="nx">title</span><span class="o">&gt;</span><span class="nx">title</span><span class="o">&lt;</span><span class="err">/title&gt;</span>
<span class="o">&lt;</span><span class="nx">script</span><span class="o">&gt;</span>
<span class="kd">function</span> <span class="nx">testF</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="k">this</span><span class="p">;</span> <span class="p">}</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">testF</span><span class="p">());</span>
<span class="kd">var</span> <span class="nx">testFCopy</span> <span class="o">=</span> <span class="nx">testF</span><span class="p">;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">testFCopy</span><span class="p">());</span>
<span class="kd">var</span> <span class="nx">testObj</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">testObjFunc</span><span class="o">:</span> <span class="nx">testF</span>
<span class="p">};</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">testObj …</span></pre></div>
                <a class="readmore" href="/jszhong-ge-chong-diao-yong-fang-shi.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>
                </ol><!-- /#posts-list -->
<p class="paginator">
        <a href="/author/sunhongyan.html">&laquo;</a>
    Page 2 / 18
        <a href="/author/sunhongyan3.html">&raquo;</a>
</p>
                </section><!-- /#content -->
        <section id="extras" class="body">
        </section><!-- /#extras -->

</body>
</html>