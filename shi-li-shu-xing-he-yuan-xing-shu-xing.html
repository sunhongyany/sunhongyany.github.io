<!DOCTYPE html>
<html lang="en">
<head>
        <title>实例属性和原型属性</title>
        <link rel="icon" href="/theme/images/icons/application_file_python_128px_6585_easyicon.net.ico" type="text/css" />
        <meta charset="utf-8" />
        <link rel="stylesheet" href="/theme/css/main.css" type="text/css" />
        <link href="/" type="application/atom+xml" rel="alternate" title="Stay hungry, stay foolish Flux ATOM" />


        <!--[if IE]>
                <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

        <!--[if lte IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="/css/ie.css"/>
                <script src="/js/IE8.js" type="text/javascript"></script><![endif]-->

        <!--[if lt IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="/css/ie6.css"/><![endif]-->

</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/index.html">Stay hungry, stay foolish </a></h1>
                <nav><ul>
                <li><a href="/index.html">Accueil</a></li>
                <li><a href="/archives.html">Archives</a></li>
                </ul></nav>
        </header><!-- /#banner -->

<section id="content" class="body">
<article>
        <header> <h1 class="entry-title"><a href="shi-li-shu-xing-he-yuan-xing-shu-xing.html"
        rel="bookmark" title="Permalink to 实例属性和原型属性">实例属性和原型属性</a></h1>  </header>
        <div class="entry-content">
        <p>利用函数作用域来实现类的效果。</p>
<ol>
<li>可以在函数中使用关键字var声明私有变量，它们可以由私有函数和特权方法访问。</li>
<li>可以在对象的构造函数中声明私有函数，并由特权方法调用。</li>
<li>特权方法可以使用this.method = function(){}.</li>
<li>公共方法可以使用Class.prototype.method = function(){}来声明。</li>
<li>公共属性可以使用this.prototype来声明，能够对外部访问。</li>
</ol>
<div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">Player</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">sport</span><span class="p">,</span> <span class="nx">age</span><span class="p">,</span> <span class="nx">country</span><span class="p">){</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">constructor</span><span class="p">.</span><span class="nx">noOfPlayers</span><span class="o">++</span><span class="p">;</span>
    <span class="c1">// 私有属性和函数，只能由特权对象浏览，编辑或调用。</span>
    <span class="kd">var</span> <span class="nx">retirementAge</span> <span class="o">=</span> <span class="mi">40</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">available</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">playerAge</span> <span class="o">=</span> <span class="nx">age</span><span class="o">?</span> <span class="nx">age</span><span class="o">:</span> <span class="mi">18</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">PlayerSport</span> <span class="o">=</span> <span class="nx">sport</span><span class="o">?</span> <span class="nx">sport</span><span class="o">:</span> <span class="s2">&quot;Un&quot;</span><span class="p">;</span>
    <span class="kd">function</span> <span class="nx">isAvailable</span><span class="p">(){</span>
        <span class="k">return</span> <span class="nx">available</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">playerAge</span> <span class="o">&lt;</span> <span class="nx">retirementAge</span><span class="p">);</span>
    <span class="p">};</span>
    <span class="kd">var</span> <span class="nx">playerName</span> <span class="o">=</span> <span class="nx">name</span> <span class="o">?</span> <span class="nx">name</span><span class="o">:</span> <span class="s2">&quot;Unknown&quot;</span><span class="p">;</span>
    <span class="c1">// 特权方法，可以从外部调用，也可以由成员访问，可以替换成对应的公共方法。</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">book</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">isAvailable</span><span class="p">()){</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">available</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="p">}</span><span class="k">else</span><span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Player is unavailable&quot;</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">};</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">getSport</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
        <span class="k">return</span> <span class="nx">playerSport</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="c1">// 公共属性可以在任何地方对其作出修改。</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">batPreference</span> <span class="o">=</span> <span class="s2">&quot;Lefty&quot;</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">hasCelebGirlfriend</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">endorses</span> <span class="o">=</span> <span class="s2">&quot;super brand&quot;</span><span class="p">;</span>
<span class="p">}</span>
<span class="c1">// 公共方法-任何人都可以读取或写入。只能访问公共属性和原型方法。</span>
<span class="nx">Player</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">switchHands</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">batPreference</span> <span class="o">=</span> <span class="s2">&quot;righty&quot;</span><span class="p">;</span>
<span class="p">};</span>
<span class="nx">Player</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">dateCeleb</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">wearGlasses</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
<span class="p">};</span>
<span class="nx">Player</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">fixEyes</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">wearsGlasses</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
<span class="p">};</span>
<span class="c1">// 原型属性-任何人都可以读取或写入（或覆盖）；</span>
<span class="nx">Player</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">wearsGlasses</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
<span class="c1">// 静态属性-任何人都可以读取或写入</span>
<span class="nx">Player</span><span class="p">.</span><span class="nx">noOfPlayers</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">(</span><span class="kd">function</span> <span class="nx">PlayerTest</span><span class="p">(){</span>
    <span class="c1">// 创建Player对象的新实例；</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">cricketer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Player</span><span class="p">(</span><span class="s2">&quot;V&quot;</span><span class="p">,</span> <span class="s2">&quot;Cricket&quot;</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="s2">&quot;E&quot;</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">golfer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Player</span><span class="p">(</span><span class="s2">&quot;pete&quot;</span><span class="p">,</span> <span class="s2">&quot;Golf&quot;</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="s2">&quot;U&quot;</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">Player</span><span class="p">.</span><span class="nx">noOfPlayers</span><span class="p">);</span>
    <span class="c1">// 两个函数共享公共的Player.prototype.wearsGlasses；</span>
    <span class="nx">cricketer</span><span class="p">.</span><span class="nx">fixEyes</span><span class="p">();</span>
    <span class="nx">golfer</span><span class="p">.</span><span class="nx">fixEyes</span><span class="p">();</span>
    <span class="nx">cricketer</span><span class="p">.</span><span class="nx">endorses</span> <span class="o">=</span> <span class="s2">&quot;Other&quot;</span><span class="p">;</span>
    <span class="c1">// 通过Player的原型来改变其公共方法</span>
    <span class="nx">Player</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">fixEyes</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">wearGlasses</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="c1">// 只改变了Cricketer的函数</span>
    <span class="nx">cricketer</span><span class="p">.</span><span class="nx">switchHands</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">batPreference</span> <span class="o">=</span> <span class="s2">&quot;undecided&quot;</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">golfer</span><span class="p">.</span><span class="nx">book</span><span class="p">();</span>
<span class="p">})();</span>
</pre></div>
        </div><!-- /.entry-content -->

</article>
<footer class="post-info">
        <abbr class="published" title="2017-09-09T19:30:00+08:00">
            Publié le 星期六 09 九月 2017 &agrave; 19:30
        </abbr>
        <address class="vcard author">
                Par <a class="url fn" href="#">sunhongyan</a>
        </address>
        <p>Dans <a href="/category/js.html">JS</a>.
</p></footer><!-- /.post-info -->
</section>

        <aside id="sidebar">
                <div class="widget">
                        <h2>Catégories</h2>
                        <ul>
                           <li ><a href="/category/git.html">git</a></li>
                           <li ><a href="/category/javascript.html">JavaScript</a></li>
                           <li class="active"><a href="/category/js.html">JS</a></li>
                           <li ><a href="/category/python.html">python</a></li>
                           <li ><a href="/category/shell.html">shell</a></li>
                           <li ><a href="/category/tornado.html">Tornado</a></li>
                           <li ><a href="/category/wang-luo.html">网络</a></li>
                        </ul>
                </div>
        </aside><!-- /#sidebar -->

</body>
</html>