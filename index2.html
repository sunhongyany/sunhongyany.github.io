<!DOCTYPE html>
<html lang="en">
<head>
        <title>learning journal</title>
        <link rel="icon" href="/theme/images/icons/application_file_python_128px_6585_easyicon.net.ico" type="text/css" />
        <meta charset="utf-8" />
        <link rel="stylesheet" href="/theme/css/main.css" type="text/css" />
        <link href="/" type="application/atom+xml" rel="alternate" title="Stay hungry, stay foolish Flux ATOM" />


        <!--[if IE]>
                <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

        <!--[if lte IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="/css/ie.css"/>
                <script src="/js/IE8.js" type="text/javascript"></script><![endif]-->

        <!--[if lt IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="/css/ie6.css"/><![endif]-->

</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/index.html">Stay hungry, stay foolish </a></h1>
                <nav><ul>
                <li><a href="/index.html">Accueil</a></li>
                <li><a href="/archives.html">Archives</a></li>
                </ul></nav>
        </header><!-- /#banner -->

        
        
     <section id="content" class="body">
        <aside id="featured"><article>
                <h1 class="entry-title"><a href="/datetime.html">datetime</a></h1> 
                <footer class="post-info">
                        <abbr class="published" title="2017-06-24T21:30:00+08:00">
                                Publié le 24/06/2017 &agrave; 21:30
                        </abbr>

                        <address class="vcard author">
                                Par <a class="url fn" href="#">sunhongyan</a>
                        </address>
                <p>Dans <a href="/category/python.html">python</a>. </p>
</p>                </footer><!-- /.post-info -->
                <p>&emsp;&emsp;datetime是Python处理日期和时间的标准库。</p>
<p>获取当前日期和时间</p>
<p>我们先看如何获取当前日期和时间：</p>
<div class="highlight"><pre><span></span>    <span class="n">In</span> <span class="p">[</span><span class="mi">10</span><span class="p">]:</span> <span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>

    <span class="n">In</span> <span class="p">[</span><span class="mi">11</span><span class="p">]:</span> <span class="n">now</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>

    <span class="n">In</span> <span class="p">[</span><span class="mi">12</span><span class="p">]:</span> <span class="n">now</span>
    <span class="n">Out</span><span class="p">[</span><span class="mi">12</span><span class="p">]:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2017</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">24</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">51</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span> <span class="mi">806565</span><span class="p">)</span>

    <span class="n">In</span> <span class="p">[</span><span class="mi">13</span><span class="p">]:</span> <span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">now</span><span class="p">))</span>
    <span class="o">&lt;</span><span class="k">class</span> <span class="err">&#39;</span><span class="nc">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="s1">&#39;&gt;</span>
</pre></div>


<p>&emsp;&emsp;注意到datetime是模块，datetime模块还包含一个datetime类，通过from datetime import datetime</p>
<p>导入的才是datetime这个类。</p>
<p>&emsp;&emsp;如果仅导入import datetime，则必须引用全名datetime.datetime。</p>
<p>&emsp;&emsp;datetime.now()返回当前日期和时间，其类型是datetime</p>
<p>str转换为datetime</p>
<p>&emsp;&emsp;很多时候，用户输入的日期和时间是字符串，要处理日期和时间，首先必须把str转换为datetime。</p>
<p>转换方法是通过datetime.strptime()实现，需要一个日期和时间的格式化字符串：</p>
<div class="highlight"><pre><span></span>    <span class="n">In</span> <span class="p">[</span><span class="mi">15</span><span class="p">]:</span> <span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>

    <span class="n">In</span> <span class="p">[</span><span class="mi">16</span><span class="p">]:</span> <span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;2017-05-02 09:10:20&#39;</span>

    <span class="n">In</span> <span class="p">[</span><span class="mi">17</span><span class="p">]:</span> <span class="n">d</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1"> %H:%M:%S&#39;</span><span class="p">)</span>

    <span class="n">In</span> <span class="p">[</span><span class="mi">18</span><span class="p">]:</span> <span class="k">print</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
    <span class="mi">2017</span><span class="o">-</span><span class="mo">05</span><span class="o">-</span><span class="mo">02</span> <span class="mi">09</span><span class="p">:</span><span class="mi">10</span><span class="p">:</span><span class="mi">20</span>
</pre></div>


<p>datetime转换为str</p>
<p>&emsp;&emsp;如果已经有了datetime对象，要把它格式化为字符串显示给用户，就需要转换为str，转换方法是通</p>
<p>过strftime()实现的，同样需要一个日期和时间的格式化字符串：</p>
<div class="highlight"><pre><span></span>    <span class="n">In</span> <span class="p">[</span><span class="mi">20</span><span class="p">]:</span>  <span class="k">print</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%a, %b </span><span class="si">%d</span><span class="s1"> %H:%M&#39;</span><span class="p">))</span>
    <span class="n">Fri</span><span class="p">,</span> <span class="n">Jan</span> <span class="mo">02</span> <span class="mi">09</span><span class="p">:</span><span class="mi">10</span>
</pre></div>


<p>datetime加减</p>
<p>&emsp;&emsp;对日期和时间进行加减实际上就是把datetime往后或往前计算，得到新的datetime。加减可以直接用</p>
<p>+和-运算符，不过需要导入timedelta这个类：</p>
<div class="highlight"><pre><span></span>    <span class="n">In</span> <span class="p">[</span><span class="mi">21</span><span class="p">]:</span> <span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">timedelta</span>

    <span class="n">In</span> <span class="p">[</span><span class="mi">22</span><span class="p">]:</span> <span class="n">d</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">hours</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
    <span class="n">Out</span><span class="p">[</span><span class="mi">22</span><span class="p">]:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2015</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>

    <span class="n">In</span> <span class="p">[</span><span class="mi">23</span><span class="p">]:</span> <span class="n">d</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">hours</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
    <span class="n">Out</span><span class="p">[</span><span class="mi">23</span><span class="p">]:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2015</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>

    <span class="n">In</span> <span class="p">[</span><span class="mi">24</span><span class="p">]:</span> <span class="n">d</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">hours</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>
    <span class="n">Out</span><span class="p">[</span><span class="mi">24</span><span class="p">]:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2015</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>
</pre></div>
        </article></aside><!-- /#featured -->
                <h1>Autres articles</h1>
                <hr />
                    <ol id="posts-list" class="hfeed">
        
 
        <li><article class="hentry">    
                <header>
                        <h1><a href="/__all__de-zuo-yong.html" rel="bookmark" title="Permalien vers «__all__的作用»">__all__的作用</a></h1>
                </header>
                
                <div class="entry-content" style="max-height: 169px; overflow: hidden">
                <p>__all__是一个string元素组成的list变量，定义了当你使用 from <module> import * 导入某个模块的时候能导出的符</p>
<p>号（这里代表变量，函数，类等）。</p>
<p>举个例子，在all_test.py中，我们明确导出符号a，b。</p>
<div class="highlight"><pre><span></span>    <span class="mi">1</span>   <span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">]</span>
      <span class="mi">1</span>
      <span class="mi">2</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>
      <span class="mi">3</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">2</span>
      <span class="mi">4</span> <span class="n">c</span> <span class="o">=</span> <span class="mi">3</span>
</pre></div>


<p>在ipython中我们输入：</p>
<div class="highlight"><pre><span></span>    <span class="n">In</span> <span class="p">[</span><span class="mi">1</span><span class="p">]:</span> <span class="kn">from</span> <span class="nn">all_test</span> <span class="kn">import</span> <span class="o">*</span>

    <span class="n">In</span> <span class="p">[</span><span class="mi">2</span><span class="p">]:</span> <span class="k">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
    <span class="mi">1</span>

    <span class="n">In</span> <span class="p">[</span><span class="mi">3</span><span class="p">]:</span> <span class="k">print</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
    <span class="mi">2</span>

    <span class="n">In</span> <span class="p">[</span><span class="mi">4</span><span class="p">]:</span> <span class="k">print</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
    <span class="o">---------------------------------------------------------------------------</span>
    <span class="ne">NameError</span>                                 <span class="n">Traceback …</span></pre></div>
                </div><!-- /.entry-content -->
                <a class="readmore" href="/__all__de-zuo-yong.html">Lire la suite...</a>
        </article></li>
        
 
        <li><article class="hentry">    
                <header>
                        <h1><a href="/chang-jian-de-ying-she-fang-fa.html" rel="bookmark" title="Permalien vers «常见的映射方法»">常见的映射方法</a></h1>
                </header>
                
                <div class="entry-content" style="max-height: 169px; overflow: hidden">
                <p>常见的映射类型有dict，defaultdict，OrderDict。</p>
<p>dict中有个setdefault方法，用于处理找不到的键。</p>
<div class="highlight"><pre><span></span>    <span class="o">&gt;&gt;&gt;</span> <span class="n">d</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="o">&gt;&gt;&gt;</span> <span class="n">k</span> <span class="o">=</span> <span class="s1">&#39;k&#39;</span>
    <span class="o">&gt;&gt;&gt;</span> <span class="n">d</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="p">[])</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
    <span class="o">&gt;&gt;&gt;</span> <span class="n">d</span>
    <span class="o">&gt;&gt;&gt;</span> <span class="p">{</span><span class="s1">&#39;k&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]}</span>
</pre></div>


<p>defaultdict处理找不到键的一个选择。</p>
<div class="highlight"><pre><span></span>    <span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">defaultdict</span>

    <span class="o">&gt;&gt;&gt;</span> <span class="n">d</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>

    <span class="o">&gt;&gt;&gt;</span> <span class="n">d</span>
    <span class="o">&gt;&gt;&gt;</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="p">{})</span>

    <span class="o">&gt;&gt;&gt;</span> <span class="n">d</span><span class="p">[</span><span class="s1">&#39;k&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>

    <span class="o">&gt;&gt;&gt;</span> <span class="n">d</span>
    <span class="o">&gt;&gt;&gt;</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;k&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]})</span>

    <span class="o">&gt;&gt;&gt;</span> <span class="n">d</span><span class="p">[</span><span class="s1">&#39;k&#39;</span><span class="p">]</span>
    <span class="o">&gt;&gt;&gt;</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]</span>
</pre></div>


<p>用来生成默认值的可调用对象存放在default_factory这个实例属性中。</p>
<div class="highlight"><pre><span></span>&gt;&gt;&gt; d.default_factory()
&gt;&gt;&gt; []
</pre></div>


<p>collections.defaultdict里的defautl_factory只会在__getitem__里被调用，在其他方法里完全不发挥</p>
<p>作用。</p>
<div class="highlight"><pre><span></span>d = defaultdict(list)
</pre></div>


<div class="highlight"><pre><span></span>    <span class="o">&gt;&gt;&gt;</span> <span class="p">[</span><span class="s1">&#39;k1 …</span></pre></div>
                </div><!-- /.entry-content -->
                <a class="readmore" href="/chang-jian-de-ying-she-fang-fa.html">Lire la suite...</a>
        </article></li>
        
 
        <li><article class="hentry">    
                <header>
                        <h1><a href="/dui-xu-lie-shi-yong-huo.html" rel="bookmark" title="Permalien vers «对序列使用+或*»">对序列使用+或*</a></h1>
                </header>
                
                <div class="entry-content" style="max-height: 169px; overflow: hidden">
                <div class="highlight"><pre><span></span>    <span class="n">In</span> <span class="p">[</span><span class="mi">9</span><span class="p">]:</span> <span class="n">l</span> <span class="o">=</span> <span class="p">[[</span><span class="s1">&#39;-&#39;</span><span class="p">]]</span> <span class="o">*</span> <span class="mi">3</span>

    <span class="n">In</span> <span class="p">[</span><span class="mi">10</span><span class="p">]:</span> <span class="n">l</span>
    <span class="n">Out</span><span class="p">[</span><span class="mi">10</span><span class="p">]:</span> <span class="p">[[</span><span class="s1">&#39;-&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;-&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;-&#39;</span><span class="p">]]</span>

    <span class="n">In</span> <span class="p">[</span><span class="mi">11</span><span class="p">]:</span> <span class="n">l</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>

    <span class="n">In</span> <span class="p">[</span><span class="mi">12</span><span class="p">]:</span> <span class="n">l</span>
    <span class="n">Out</span><span class="p">[</span><span class="mi">12</span><span class="p">]:</span> <span class="p">[[</span><span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">]]</span>
</pre></div>


<p>出现这种现象的原因是[['-']] * 3创建的['-']都是指向同一个列表的引用。</p>
<p>可以使用列表推导式达到其他列表不改变的目的。</p>
<div class="highlight"><pre><span></span>    <span class="n">In</span> <span class="p">[</span><span class="mi">13</span><span class="p">]:</span> <span class="n">l</span> <span class="o">=</span> <span class="p">[[</span><span class="s1">&#39;-&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)]</span>

    <span class="n">In</span> <span class="p">[</span><span class="mi">14</span><span class="p">]:</span> <span class="n">l</span>
    <span class="n">Out</span><span class="p">[</span><span class="mi">14</span><span class="p">]:</span> <span class="p">[[</span><span class="s1">&#39;-&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;-&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;-&#39;</span><span class="p">]]</span>

    <span class="n">In</span> <span class="p">[</span><span class="mi">15</span><span class="p">]:</span> <span class="n">l</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>

    <span class="n">In</span> <span class="p">[</span><span class="mi">16</span><span class="p">]:</span> <span class="n">l</span>
    <span class="n">Out …</span></pre></div>
                </div><!-- /.entry-content -->
                <a class="readmore" href="/dui-xu-lie-shi-yong-huo.html">Lire la suite...</a>
        </article></li>
        
 
        <li><article class="hentry">    
                <header>
                        <h1><a href="/itemgetteryu-attrgetter.html" rel="bookmark" title="Permalien vers «itemgetter与attrgetter»">itemgetter与attrgetter</a></h1>
                </header>
                
                <div class="entry-content" style="max-height: 169px; overflow: hidden">
                <p>itemgetter的常见用途：根据元祖的某个字段给元祖列表排序。</p>
<p>'''python
    In [1]: from operator import itemgetter</p>
<div class="highlight"><pre><span></span>In [2]: args = [(2, &#39;b&#39;, &#39;123&#39;), (1, &quot;a&quot;, &quot;123&quot;), (3, &quot;c&quot;, &quot;345&quot;)]

In [3]: for i in sorted(args, key=itemgetter(1)):

...:     print(i)

...:

(1, &#39;a&#39;, &#39;123&#39;)

(2, &#39;b&#39;, &#39;123&#39;)

(3, &#39;c&#39;, &#39;345&#39;)
</pre></div>


<p>'''</p>
<p>如果把多个参数传给itemgetter，他构建的函数会返回提取的值构成元祖。</p>
<p>'''python
    In [86]: d = itemgetter(1 …</p>
                </div><!-- /.entry-content -->
                <a class="readmore" href="/itemgetteryu-attrgetter.html">Lire la suite...</a>
        </article></li>
        
 
        <li><article class="hentry">    
                <header>
                        <h1><a href="/qie-pian.html" rel="bookmark" title="Permalien vers «切片»">切片</a></h1>
                </header>
                
                <div class="entry-content" style="max-height: 169px; overflow: hidden">
                <p>给切片赋值</p>
<div class="highlight"><pre><span></span>&gt;&gt;&gt; l = list(range(10))
&gt;&gt;&gt; l
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
&gt;&gt;&gt; l[2:5] = [&#39;a&#39;]
&gt;&gt;&gt; l
[0, 1, &#39;a&#39;, 5, 6, 7, 8, 9]
&gt;&gt;&gt; l[3:6:2] = [&#39;b&#39;, &#39;c&#39;]
&gt;&gt;&gt; l
[0, 1, &#39;a&#39;, &#39;b&#39;, 6, &#39;c&#39;, 8, 9]
</pre></div>


<p>但是赋值对象是切片时，赋值语句右面必须是个可迭代对象。</p>
<div class="highlight"><pre><span></span>&gt;&gt;&gt; l[3:5] = 3 …</pre></div>
                </div><!-- /.entry-content -->
                <a class="readmore" href="/qie-pian.html">Lire la suite...</a>
        </article></li>
        
 
        <li><article class="hentry">    
                <header>
                        <h1><a href="/sheng-cheng-yi-ge-huo-duo-ge-htmlbiao-qian.html" rel="bookmark" title="Permalien vers «生成一个或多个HTML标签»">生成一个或多个HTML标签</a></h1>
                </header>
                
                <div class="entry-content" style="max-height: 169px; overflow: hidden">
                <div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">3</span><span class="p">]:</span> <span class="k">def</span> <span class="nf">tag</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="o">*</span><span class="n">content</span><span class="p">,</span> <span class="bp">cls</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="o">**</span><span class="n">attrs</span><span class="p">):</span>

   <span class="o">...</span><span class="p">:</span>     <span class="s2">&quot;&quot;&quot;生成一个或多个HTML标签&quot;&quot;&quot;</span>

   <span class="o">...</span><span class="p">:</span>     <span class="k">if</span> <span class="bp">cls</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>

   <span class="o">...</span><span class="p">:</span>         <span class="n">attrs</span><span class="p">[</span><span class="s1">&#39;class&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">cls</span>

   <span class="o">...</span><span class="p">:</span>     <span class="k">if</span> <span class="n">attrs</span><span class="p">:</span>

   <span class="o">...</span><span class="p">:</span>         <span class="n">attr_str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39; </span><span class="si">%s</span><span class="s1">=&quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span> <span class="o">%</span> <span class="p">(</span>
                    <span class="n">attr</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span> <span class="k">for</span> <span class="n">attr</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">attrs</span><span class="o">.</span><span class="n">items</span><span class="p">()))</span>

   <span class="o">...</span><span class="p">:</span>     <span class="k">else</span><span class="p">:</span>

   <span class="o">...</span><span class="p">:</span>         <span class="n">attr_str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

   <span class="o">...</span><span class="p">:</span>     <span class="k">if</span> <span class="n">content</span><span class="p">:</span>

   <span class="o">...</span><span class="p">:</span>         <span class="k">return</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;&lt;</span><span class="si">%s%s</span><span class="s1">&gt;</span><span class="si">%s</span><span class="s1">&lt;/</span><span class="si">%s</span><span class="s1">&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span>
                    <span class="n">name</span><span class="p">,</span> <span class="n">attr_str</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span> <span class="k">for</span> <span class="n">c …</span></pre></div>
                </div><!-- /.entry-content -->
                <a class="readmore" href="/sheng-cheng-yi-ge-huo-duo-ge-htmlbiao-qian.html">Lire la suite...</a>
        </article></li>
        
 
        <li><article class="hentry">    
                <header>
                        <h1><a href="/xu-lie-zeng-liang-fu-zhi.html" rel="bookmark" title="Permalien vers «序列增量赋值»">序列增量赋值</a></h1>
                </header>
                
                <div class="entry-content" style="max-height: 169px; overflow: hidden">
                <p>&emsp;&emsp;+=背后的特殊方法是__iadd__(用于就地加法)，如果一个类没有这个方法，就会调用__add__。</p>
<p>a += b如果a没有实现__iadd__方法，a += b 就和a = a + b一样。*=和+=用法一样。</p>
<div class="highlight"><pre><span></span>    <span class="n">In</span> <span class="p">[</span><span class="mi">19</span><span class="p">]:</span> <span class="n">l1</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>

    <span class="n">In</span> <span class="p">[</span><span class="mi">20</span><span class="p">]:</span> <span class="nb">id</span><span class="p">(</span><span class="n">l1</span><span class="p">)</span>
    <span class="n">Out</span><span class="p">[</span><span class="mi">20</span><span class="p">]:</span> <span class="mi">4537296648</span>

    <span class="n">In</span> <span class="p">[</span><span class="mi">21</span><span class="p">]:</span> <span class="n">l1</span> <span class="o">+=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="n">In</span> <span class="p">[</span><span class="mi">22</span><span class="p">]:</span> <span class="n">l1</span>
    <span class="n">Out</span><span class="p">[</span><span class="mi">22</span><span class="p">]:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>

    <span class="n">In</span> <span class="p">[</span><span class="mi">25</span><span class="p">]:</span> <span class="nb">id</span><span class="p">(</span><span class="n">l1</span><span class="p">)</span>
    <span class="n">Out</span><span class="p">[</span><span class="mi">25</span><span class="p">]:</span> <span class="mi">4537296648</span>

    <span class="n">In</span> <span class="p">[</span><span class="mi">23 …</span></pre></div>
                </div><!-- /.entry-content -->
                <a class="readmore" href="/xu-lie-zeng-liang-fu-zhi.html">Lire la suite...</a>
        </article></li>
        
 
        <li><article class="hentry">    
                <header>
                        <h1><a href="/you-guan-dict.html" rel="bookmark" title="Permalien vers «有关dict»">有关dict</a></h1>
                </header>
                
                <div class="entry-content" style="max-height: 169px; overflow: hidden">
                <p>1.键必须是可散列的。</p>
<p>&emsp;&emsp;一个可散列的对象必须满足：</p>
<p>&emsp;&emsp;（1）支持hash()函数，并且通过hash()所得到的散列值是不变的。</p>
<p>&emsp;&emsp;（2）支持__eq__()方法来检测相等性。</p>
<p>&emsp;&emsp;（3）若a == b为真，则hash（a）== hash（b）也为真。</p>
<p>&emsp;&emsp;所有由用户自定义的对象默认都是可散列的。因为她们的散列值由id()获取，而且她们都不相等。</p>
<p>2.字典在内存上开销巨大。</p>
<p>&emsp;&emsp;如果数据不过大，不要空间优化，因为优化往往是可维护的对立面。</p>
<p>3.键查询很快。</p>
<p>4.键的次序取决于添加顺序。</p>
<p>5.往字典里添加新键可能会改变已有键的顺序。</p>
<p>&emsp;&emsp;迭代一个字典的所有键过程中同时对字典的键进行修改，那么这个循环很可能会跳过一些键，甚至</p>
<p>跳过那些字典中已有的键。</p>
<p>&emsp;&emsp;在python3中.keys(),.items(),.values()返回的都是字典视图，可以实时反馈字典的变化。</p>
                </div><!-- /.entry-content -->
                <a class="readmore" href="/you-guan-dict.html">Lire la suite...</a>
        </article></li>
        
 
        <li><article class="hentry">    
                <header>
                        <h1><a href="/namedtuple.html" rel="bookmark" title="Permalien vers «namedtuple»">namedtuple</a></h1>
                </header>
                
                <div class="entry-content" style="max-height: 169px; overflow: hidden">
                <p>&emsp;&emsp;collections.namedtuple是一个工厂函数,它可以用来构建个一个带字段名的元祖和一个有名字的类，</p>
<p>这个带名字的类对调试有很大帮助。</p>
<p>&emsp;&emsp;用namedtuple构建的类的实例和元祖所需内存是一样的，因为字段名都被存在对应的类里，这个实</p>
<p>例和普通的实例对象比起来也要小一些，因为python不用__dict__存放这些实例的属性。</p>
<p>&emsp;&emsp;创建一个namedtuple，需要传两个参数，一个是类名，一个是类的各个字段名，后者可是数个字符</p>
<p>组成的可迭代对象或者是由空格分隔开的字段名组成的字符串。存放在对应字段里的数据要以一段参数</p>
<p>的形式传入到构造函数中(注意：元祖的构造函数却只接受单一的可迭代对象)。</p>
<p>&emsp;&emsp;可以通过字段名或者位置来获取一个字段信息。</p>
<p>&emsp;&emsp;namestuple除了从普通元祖继承来的属性，还有一些专有属性，最有用的是类属性_fields,类方法</p>
<p>_make(iterable),实例方法_asdict().</p>
<div class="highlight"><pre><span></span><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">collections</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">s</span> <span class="o">=</span> <span class="n">collections</span><span class="o">.</span><span class="n">namedtuple</span><span class="p">(</span><span class="s1">&#39;s&#39;</span><span class="p">,</span> <span class="s1">&#39;a b c&#39;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">s</span><span class="o">.</span><span class="n">_fields</span>
<span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">data</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">,</span> <span class="s1">&#39;2&#39;</span><span class="p">,</span> <span class="s1">&#39;3&#39;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">i</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">_make</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">i …</span></pre></div>
                </div><!-- /.entry-content -->
                <a class="readmore" href="/namedtuple.html">Lire la suite...</a>
        </article></li>
        
 
        <li><article class="hentry">    
                <header>
                        <h1><a href="/formatyong-fa.html" rel="bookmark" title="Permalien vers «format用法»">format用法</a></h1>
                </header>
                
                <div class="entry-content" style="max-height: 169px; overflow: hidden">
                <p>1.通过位置获取参数</p>
<div class="highlight"><pre><span></span>&gt;&gt;&gt; &#39;{0}, {1}, {2}&#39;.format(&#39;a&#39;, &#39;b&#39;, &#39;c&#39;)
&#39;a, b, c&#39;
&gt;&gt;&gt; &#39;{}, {}, {}&#39;.format(&#39;a&#39;, &#39;b&#39;, &#39;c&#39;)  # 3.1+ only
&#39;a, b, c&#39;
&gt;&gt;&gt; &#39;{2}, {1}, {0}&#39;.format(&#39;a&#39;, &#39;b&#39;, &#39;c&#39;)
&#39;c, b, a&#39;
&gt;&gt;&gt; &#39;{2}, {1}, {0}&#39;.format(*&#39;abc&#39;)      # unpacking argument sequence
&#39;c, b, a&#39;
&gt;&gt;&gt; &#39;{0}{1}{0}&#39;.format(&#39;abra&#39;, &#39;cad&#39;)   # arguments …</pre></div>
                </div><!-- /.entry-content -->
                <a class="readmore" href="/formatyong-fa.html">Lire la suite...</a>
        </article></li>
        
 
        <li><article class="hentry">    
                <header>
                        <h1><a href="/pythonzhong-de-nei-zhi-xu-lie-yi.html" rel="bookmark" title="Permalien vers «python中的内置序列（一）»">python中的内置序列（一）</a></h1>
                </header>
                
                <div class="entry-content" style="max-height: 169px; overflow: hidden">
                <p>python的序列按存放的数据类型是否相同，可分为：</p>
<p>容器序列：</p>
<ul>
<li>tuple，list，collections.queue这些序列可以存放的不同数据类型。</li>
</ul>
<p>扁平序列：</p>
<ul>
<li>str，bytes，bytearry，memoryview和array.array这些序列只能容纳一种类型。</li>
</ul>
<p>容器序列存放的是它们所包含的任意类型对象的引用，而扁平序列存放的是值不是引用。扁平序列是一</p>
<p>段连续的内存空间，扁平序列更加紧凑，但他只能存放诸如字符，数值和字节这种基础类型。</p>
<p>还可按照能否被修改来分类：</p>
<p>可变序列：</p>
<ul>
<li>list，bytearray，array.array，collections.queue和memoryview。</li>
</ul>
<p>不可变序列：</p>
<ul>
<li>tuple，str和bytes。</li>
</ul>
                </div><!-- /.entry-content -->
                <a class="readmore" href="/pythonzhong-de-nei-zhi-xu-lie-yi.html">Lire la suite...</a>
        </article></li>
        
 
        <li><article class="hentry">    
                <header>
                        <h1><a href="/shell-kuai-jie-jian.html" rel="bookmark" title="Permalien vers «shell 快捷键»">shell 快捷键</a></h1>
                </header>
                
                <div class="entry-content" style="max-height: 169px; overflow: hidden">
                <p>ctrl+a 跳到所在行的开头</p>
<p>ctrl+e 跳到光标所在行的行尾</p>
<p>ctrl+l 清屏</p>
<p>ctrl+u 清除这一行中光标前的内容</p>
<p>ctrl+c 杀死正在运行的程序</p>
<p>ctrl+d 退出当前shell </p>
<p>ctrl+z 将正在运行的程序变成挂起的后台进程，fg恢复</p>
<p>ctrl+w 删除光标前的单词</p>
<p>ctrl+k 清除这一行中光标后的内容</p>
<p>ctrl+t 交换光标前的最后两个字符</p>
<p>esc+t 交换光标前的最后两个单词</p>
                </div><!-- /.entry-content -->
                <a class="readmore" href="/shell-kuai-jie-jian.html">Lire la suite...</a>
        </article></li>
        
 
        <li><article class="hentry">    
                <header>
                        <h1><a href="/pythonzhong-__repr__he-__str__.html" rel="bookmark" title="Permalien vers «python中 __repr__和__str__»">python中 __repr__和__str__</a></h1>
                </header>
                
                <div class="entry-content" style="max-height: 169px; overflow: hidden">
                <p>python对象的一个基本要求就是它得有个合理的字符串表示形式，我们可以通过__repr__ 和__str__来满</p>
<p>足这个要求，前者方便调试和记录日志，后者是给终端用户看的。</p>
<p>例如，我们构造一个Person类：</p>
<div class="highlight"><pre><span></span><span class="kr">class</span> <span class="nx">Person</span><span class="p">(</span><span class="nx">object</span><span class="p">)</span><span class="o">:</span>

    <span class="nx">def</span> <span class="nx">__init__</span><span class="p">(</span><span class="nx">self</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">gender</span><span class="p">)</span><span class="o">:</span>

        <span class="nx">self</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">name</span>

        <span class="nx">self</span><span class="p">.</span><span class="nx">gender</span> <span class="o">=</span> <span class="nx">gender</span>

    <span class="nx">def</span> <span class="nx">__str__</span><span class="p">(</span><span class="nx">self</span><span class="p">)</span><span class="o">:</span>

        <span class="k">return</span> <span class="s1">&#39;(Person: %s, %s)&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span> <span class="nx">self</span><span class="p">.</span><span class="nx">gender</span><span class="p">)</span>
</pre></div>


<p>当在终端输入：</p>
<div class="highlight"><pre><span></span>&gt;&gt;&gt; p = Person(&quot;a&quot;, &quot;women&quot;)

&gt;&gt;&gt; print(p)

(Person: a, women)

&gt;&gt;&gt; p

&lt;__main__.Person object at 0x1055b4b70&gt;
</pre></div>


<p>可以看出 …</p>
                </div><!-- /.entry-content -->
                <a class="readmore" href="/pythonzhong-__repr__he-__str__.html">Lire la suite...</a>
        </article></li>
        
 
        <li><article class="hentry">    
                <header>
                        <h1><a href="/pythonzhong-de-nei-zhi-xu-lie-er.html" rel="bookmark" title="Permalien vers «python中的内置序列（二）»">python中的内置序列（二）</a></h1>
                </header>
                
                <div class="entry-content" style="max-height: 169px; overflow: hidden">
                <p>列表推导式python2与python3区别</p>
<p>在python2中：</p>
<div class="highlight"><pre><span></span>&gt;&gt;&gt; [x for x in range(5)]
[0, 1, 2, 3, 4]
&gt;&gt;&gt; x
4
&gt;&gt;&gt; i = 0
&gt;&gt;&gt; [i for i in range(5)]
[0, 1, 2, 3, 4]
&gt;&gt;&gt; i
4
</pre></div>


<p>在python3中：</p>
<div class="highlight"><pre><span></span>&gt;&gt;&gt; [x for x in range(5)]
[0, 1, 2, 3, 4]
&gt;&gt;&gt; x
Traceback (most recent call last):
    File &quot;&lt;pyshell …</pre></div>
                </div><!-- /.entry-content -->
                <a class="readmore" href="/pythonzhong-de-nei-zhi-xu-lie-er.html">Lire la suite...</a>
        </article></li>
</ol><!-- /#posts-list -->
</section><!-- /#content -->

        <aside id="sidebar">
                <div class="widget">
                        <h2>Catégories</h2>
                        <ul>
                           <li ><a href="/category/python.html">python</a></li>
                           <li ><a href="/category/shell.html">shell</a></li>
                        </ul>
                </div>
        </aside><!-- /#sidebar -->

</body>
</html>